import{j as e,m as s}from"./framer-motion-BBUa6XRi.js";import{d as t,u as a,r}from"./react-vendor-JRUwHvIr.js";import{a as i,A as n}from"./index-m6j2drX8.js";import{a as l,C as m,z as o,n as c,G as d}from"./ui-vendor-B2uU1U_S.js";const x=()=>{var x,p,h,u,b;const{registrationId:y}=t(),g=a(),{showNotification:j}=i(),[N,f]=r.useState(null),[v,w]=r.useState(!0),[P,F]=r.useState(!1),[S,C]=r.useState({utrNumber:"",screenshot:null});r.useEffect(()=>{I()},[y]);const I=async()=>{try{const{data:e}=await n.get(`/registrations/${y}`);f(e.registration),"completed"===e.registration.paymentStatus?(j({title:"Payment Completed",message:"Payment already completed",icon:l,type:"success"}),g("/dashboard")):"verification_pending"===e.registration.paymentStatus&&(j({title:"Verification Pending",message:"Payment proof already submitted. Awaiting verification.",icon:l,type:"info"}),g("/dashboard"))}catch(e){j({title:"Loading Failed",message:"Failed to load registration details",icon:m,type:"error"}),g("/dashboard")}finally{w(!1)}};return v?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-primary-500"})}):N?e.jsx("div",{className:"min-h-screen pt-20 pb-12 relative",children:e.jsx("div",{className:"relative z-10 max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Complete Payment"}),e.jsx("p",{className:"text-gray-400 mb-8",children:"Complete your registration by making the payment"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[e.jsx(o,{className:"w-6 h-6 mr-2 text-primary-400"}),"Payment Details"]}),e.jsxs("div",{className:"space-y-4 mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[e.jsx("span",{className:"text-gray-400",children:"Event"}),e.jsx("span",{className:"font-semibold",children:null==(x=N.event)?void 0:x.name})]}),e.jsx("div",{className:"pb-3 border-b border-white/10",children:e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"inline-block px-4 py-2 rounded-lg",style:{background:"linear-gradient(135deg, #FA812F 0%, #FAB12F 100%)",boxShadow:"0 2px 8px rgba(250, 129, 47, 0.3)"},children:[e.jsx("div",{className:"text-xs font-semibold mb-1",style:{color:"#FEF3E2",opacity:.9,letterSpacing:"0.5px"},children:"PARTICIPANT ID"}),e.jsx("div",{className:"font-bold text-base",style:{color:"#2C5F7F",fontFamily:"monospace",letterSpacing:"0.5px"},children:N.registrationNumber||"N/A"})]})})}),N.teamName&&e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[e.jsx("span",{className:"text-gray-400",children:"Team Name"}),e.jsx("span",{className:"font-semibold",children:N.teamName})]}),e.jsxs("div",{className:"flex justify-between items-center pb-3 border-b border-white/10",children:[e.jsx("span",{className:"text-gray-400",children:"Amount"}),e.jsxs("span",{className:"text-2xl font-bold text-primary-400 flex items-center",children:[e.jsx(c,{className:"w-5 h-5"}),N.amount]})]})]}),e.jsxs("div",{className:"bg-white/5 rounded-lg p-6 mb-6",children:[e.jsx("h3",{className:"font-semibold mb-4 text-center",children:"Scan QR Code to Pay"}),e.jsx("div",{className:"bg-white rounded-lg p-4 mb-4",children:(null==(p=N.event)?void 0:p.paymentQRCode)?e.jsx("img",{src:N.event.paymentQRCode,alt:"Payment QR Code",className:"w-full max-w-xs mx-auto"}):e.jsx("div",{className:"w-64 h-64 bg-gray-200 rounded-lg flex items-center justify-center mx-auto",children:e.jsxs("p",{className:"text-gray-600 text-center",children:["QR Code",e.jsx("br",{}),"Not Available"]})})}),(null==(h=N.event)?void 0:h.paymentUPI)&&e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"UPI ID"}),e.jsx("p",{className:"font-mono text-primary-400 font-semibold",children:N.event.paymentUPI})]}),(null==(u=N.event)?void 0:u.paymentAccountName)&&e.jsxs("div",{className:"text-center mt-2",children:[e.jsx("p",{className:"text-sm text-gray-400 mb-1",children:"Account Name"}),e.jsx("p",{className:"font-semibold",children:N.event.paymentAccountName})]})]}),(null==(b=N.event)?void 0:b.paymentInstructions)&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-yellow-200",children:N.event.paymentInstructions})})]}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center",children:[e.jsx(d,{className:"w-6 h-6 mr-2 text-primary-400"}),"Upload Payment Proof"]}),e.jsxs("form",{onSubmit:async e=>{var s,t;if(e.preventDefault(),S.utrNumber)if(S.screenshot){F(!0);try{const e=new FormData;e.append("registrationId",y),e.append("utrNumber",S.utrNumber),e.append("screenshot",S.screenshot),e.append("amount",N.amount),await n.post("/payments/offline",e,{headers:{"Content-Type":"multipart/form-data"}}),j({title:"Payment Submitted Successfully!",message:"Your payment proof has been submitted. We will verify it shortly. ðŸŽ‰",icon:l}),setTimeout(()=>{g("/dashboard")},2e3)}catch(a){j({title:"Submission Failed",message:(null==(t=null==(s=a.response)?void 0:s.data)?void 0:t.message)||"Payment submission failed",icon:m,type:"error"})}finally{F(!1)}}else j({title:"Missing Screenshot",message:"Please upload payment screenshot",icon:m,type:"error"});else j({title:"Missing Information",message:"Please enter UTR/Transaction number",icon:m,type:"error"})},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"UTR/Transaction Number *"}),e.jsx("input",{type:"text",value:S.utrNumber,onChange:e=>C({...S,utrNumber:e.target.value}),className:"input-field",placeholder:"Enter 12-digit UTR number",pattern:"[0-9]{12}",maxLength:"12",title:"Please enter a valid 12-digit UTR number",required:!0}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"You can find this in your payment confirmation message"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Payment Screenshot *"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,image/webp",onChange:e=>{const s=e.target.files[0];if(s){if(s.size>5242880)return void j({title:"File Too Large",message:"File size should be less than 5MB",icon:m,type:"error"});if(!["image/jpeg","image/jpg","image/png","image/webp"].includes(s.type))return void j({title:"Invalid File Type",message:"Please upload a valid image file (JPG, PNG, or WebP)",icon:m,type:"error"});C({...S,screenshot:s})}},className:"hidden",id:"screenshot-upload",required:!0}),e.jsx("label",{htmlFor:"screenshot-upload",className:"block w-full glass-effect border-2 border-dashed border-white/20 rounded-lg p-8 text-center cursor-pointer hover:border-primary-400 transition-colors",children:S.screenshot?e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{className:"w-12 h-12 text-green-500 mx-auto"}),e.jsx("p",{className:"text-sm font-semibold text-green-400",children:S.screenshot.name}),e.jsx("p",{className:"text-xs text-gray-400",children:"Click to change"})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{className:"w-12 h-12 text-gray-400 mx-auto"}),e.jsx("p",{className:"text-sm font-semibold",children:"Click to upload screenshot"}),e.jsx("p",{className:"text-xs text-gray-400",children:"PNG, JPG up to 5MB"})]})})]})]}),e.jsx("div",{className:"bg-primary-500/10 border border-primary-500/20 rounded-lg p-4",children:e.jsxs("p",{className:"text-sm text-primary-200",children:[e.jsx("strong",{children:"Important:"})," Your payment will be verified by our team within 24 hours. You'll receive a confirmation email once verified."]})}),e.jsx("button",{type:"submit",disabled:P,className:"w-full btn-primary flex items-center justify-center space-x-2",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),e.jsx("span",{children:"Submitting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{className:"w-5 h-5"}),e.jsx("span",{children:"Submit Payment"})]})})]})]})]})]})})}):null};export{x as default};
