import{j as e,m as s}from"./framer-motion-BBUa6XRi.js";import{u as l,r as a,L as t}from"./react-vendor-JRUwHvIr.js";import{A as i}from"./index-m6j2drX8.js";import{o as n,X as r,G as o,N as c,J as d}from"./ui-vendor-B2uU1U_S.js";const m=()=>{const m=l(),u=a.useRef(null),x=a.useRef(null),[p,h]=a.useState(!1),[b,g]=a.useState(!1),[y,j]=a.useState(!1),[f,v]=a.useState(null),[N,C]=a.useState(null),[F,k]=a.useState("individual"),[w,E]=a.useState({name:"",description:"",shortDescription:"",category:"Technical",department:"CSE",date:"",time:"",venue:"",maxParticipants:"",registrationFee:0,teamSize:{min:1,max:1},prizes:{first:"",second:"",third:""},image:"",rules:[""],eligibility:[""],coordinators:[{name:"",phone:"",email:""}],paymentQRCode:"",paymentUPI:"",paymentAccountName:"",paymentInstructions:""}),z=e=>{const{name:s,value:l}=e.target;E(e=>({...e,[s]:l}))},P=(e,s,l)=>{E(a=>({...a,[e]:{...a[e],[s]:l}}))},S=(e,s,l)=>{E(a=>({...a,[e]:a[e].map((e,a)=>a===s?l:e)}))},I=(e,s,l)=>{E(a=>({...a,coordinators:a.coordinators.map((a,t)=>t===e?{...a,[s]:l}:a)}))},R=e=>{E(s=>({...s,[e]:[...s[e],""]}))},A=(e,s)=>{E(l=>({...l,[e]:l[e].filter((e,l)=>l!==s)}))};return e.jsx("div",{className:"min-h-screen pt-20 pb-12",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs(t,{to:"/admin/events",className:"inline-flex items-center mb-6 transition-colors font-bold",style:{color:"#5C4033"},children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Back to Events"]}),e.jsxs(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"card",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Create New Event"}),e.jsxs("form",{onSubmit:async e=>{var s,l;e.preventDefault(),h(!0);try{const e={...w,rules:w.rules.filter(e=>e.trim()),eligibility:w.eligibility.filter(e=>e.trim()),coordinators:w.coordinators.filter(e=>e.name&&e.phone&&e.email),maxParticipants:parseInt(w.maxParticipants),registrationFee:parseFloat(w.registrationFee),teamSize:{min:parseInt(w.teamSize.min),max:parseInt(w.teamSize.max)}};await i.post("/events",e),d.success("Event created successfully!"),m("/admin/events")}catch(a){d.error((null==(l=null==(s=a.response)?void 0:s.data)?void 0:l.message)||"Failed to create event")}finally{h(!1)}},className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Event Name *"}),e.jsx("input",{type:"text",name:"name",value:w.name,onChange:z,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Short Description *"}),e.jsx("input",{type:"text",name:"shortDescription",value:w.shortDescription,onChange:z,className:"input-field",placeholder:"Brief one-line description",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Full Description *"}),e.jsx("textarea",{name:"description",value:w.description,onChange:z,className:"input-field min-h-[120px]",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Category *"}),e.jsx("select",{name:"category",value:w.category,onChange:z,className:"input-field",style:{color:"#2C1810"},required:!0,children:["Technical","Non-Technical","Cultural"].map(s=>e.jsx("option",{value:s,style:{backgroundColor:"#FEF3E2",color:"#2C1810"},children:s},s))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Department"}),e.jsx("select",{name:"department",value:w.department,onChange:z,className:"input-field",style:{color:"#2C1810"},children:["CSE","ECE","CSE(AIML)","CIVIL","Applied Science","Common"].map(s=>e.jsx("option",{value:s,style:{backgroundColor:"#FEF3E2",color:"#2C1810"},children:s},s))})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Event Image"}),e.jsxs("div",{className:"space-y-3",children:[f?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:f,alt:"Preview",className:"w-full h-48 object-cover rounded-lg"}),e.jsx("button",{type:"button",onClick:()=>{v(null),E(e=>({...e,image:""})),u.current&&(u.current.value="")},className:"absolute top-2 right-2 p-2 rounded-lg transition-colors",style:{backgroundColor:"#a83232",color:"#FEF3E2"},children:e.jsx(r,{className:"w-4 h-4"})})]}):e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=u.current)?void 0:e.click()},disabled:b,className:"w-full h-48 border-2 border-dashed rounded-lg flex flex-col items-center justify-center transition-colors disabled:opacity-50",style:{borderColor:"rgba(250, 129, 47, 0.5)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 mb-3",style:{borderColor:"#FA812F"}}),e.jsx("p",{style:{color:"#5C4033"},children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-12 h-12 mb-3",style:{color:"#FA812F"}}),e.jsx("p",{className:"font-medium",style:{color:"#5C4033"},children:"Click to upload image"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"rgba(92, 64, 51, 0.7)"},children:"PNG, JPG, GIF up to 10MB"})]})}),e.jsx("input",{ref:u,type:"file",accept:"image/*",onChange:async e=>{var s,l,a;const t=null==(s=e.target.files)?void 0:s[0];if(!t)return;if(!t.type.startsWith("image/"))return void d.error("Please select an image file");if(t.size>10485760)return void d.error("Image size should be less than 10MB");const n=new FileReader;n.onloadend=()=>{v(n.result)},n.readAsDataURL(t),g(!0);const r=new FormData;r.append("image",t);try{const{data:e}=await i.post("/events/upload-image",r,{headers:{"Content-Type":"multipart/form-data"}});E(s=>({...s,image:e.imageUrl})),d.success("Image uploaded successfully!")}catch(o){d.error((null==(a=null==(l=o.response)?void 0:l.data)?void 0:a.message)||"Failed to upload image"),v(null)}finally{g(!1)}},className:"hidden"})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Event Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Date *"}),e.jsx("input",{type:"date",name:"date",value:w.date,onChange:z,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Time *"}),e.jsx("input",{type:"time",name:"time",value:w.time,onChange:z,className:"input-field",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Venue *"}),e.jsx("input",{type:"text",name:"venue",value:w.venue,onChange:z,className:"input-field",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Max Participants *"}),e.jsx("input",{type:"number",name:"maxParticipants",value:w.maxParticipants,onChange:z,className:"input-field",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Registration Fee (â‚¹)"}),e.jsx("input",{type:"number",name:"registrationFee",value:w.registrationFee,onChange:z,className:"input-field",min:"0"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Team Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-3",style:{color:"#5C4033"},children:"Event Type *"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{type:"button",onClick:()=>{k("individual"),E(e=>({...e,teamSize:{min:1,max:1}}))},className:"flex-1 py-3 px-6 rounded-lg font-semibold transition-all",style:"individual"===F?{background:"linear-gradient(to right, #5C4033, #8b4513)",color:"#FEF3E2",boxShadow:"0 4px 12px rgba(92, 64, 51, 0.4)"}:{backgroundColor:"rgba(250, 129, 47, 0.1)",color:"#5C4033"},children:"Individual Event"}),e.jsx("button",{type:"button",onClick:()=>{k("team"),E(e=>({...e,teamSize:{min:2,max:4}}))},className:"flex-1 py-3 px-6 rounded-lg font-semibold transition-all",style:"team"===F?{background:"linear-gradient(to right, #5C4033, #8b4513)",color:"#FEF3E2",boxShadow:"0 4px 12px rgba(92, 64, 51, 0.4)"}:{backgroundColor:"rgba(250, 129, 47, 0.1)",color:"#5C4033"},children:"Team Event"})]})]}),"team"===F&&e.jsxs("div",{className:"space-y-4 p-4 rounded-lg border",style:{backgroundColor:"rgba(250, 177, 47, 0.1)",borderColor:"rgba(250, 129, 47, 0.3)"},children:[e.jsx("p",{className:"text-sm",style:{color:"#5C4033"},children:"Configure team size requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Minimum Team Members *"}),e.jsx("input",{type:"number",value:w.teamSize.min,onChange:e=>P("teamSize","min",e.target.value),className:"input-field",min:"1",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Maximum Team Members *"}),e.jsx("input",{type:"number",value:w.teamSize.max,onChange:e=>P("teamSize","max",e.target.value),className:"input-field",min:"1",required:!0})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Prizes"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"1st Prize"}),e.jsx("input",{type:"text",value:w.prizes.first,onChange:e=>P("prizes","first",e.target.value),className:"input-field",placeholder:"â‚¹10,000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"2nd Prize"}),e.jsx("input",{type:"text",value:w.prizes.second,onChange:e=>P("prizes","second",e.target.value),className:"input-field",placeholder:"â‚¹5,000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"3rd Prize"}),e.jsx("input",{type:"text",value:w.prizes.third,onChange:e=>P("prizes","third",e.target.value),className:"input-field",placeholder:"â‚¹2,000"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Rules & Regulations"}),e.jsxs("button",{type:"button",onClick:()=>R("rules"),className:"btn-secondary text-sm py-2 px-4 flex items-center space-x-2",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Rule"})]})]}),w.rules.map((s,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:e=>S("rules",l,e.target.value),className:"input-field flex-1",placeholder:`Rule ${l+1}`}),w.rules.length>1&&e.jsx("button",{type:"button",onClick:()=>A("rules",l),className:"p-2 rounded-lg transition-colors",style:{color:"#a83232"},children:e.jsx(r,{className:"w-5 h-5"})})]},l))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Eligibility Criteria"}),e.jsxs("button",{type:"button",onClick:()=>R("eligibility"),className:"btn-secondary text-sm py-2 px-4 flex items-center space-x-2",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Criteria"})]})]}),w.eligibility.map((s,l)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:s,onChange:e=>S("eligibility",l,e.target.value),className:"input-field flex-1",placeholder:`Criteria ${l+1}`}),w.eligibility.length>1&&e.jsx("button",{type:"button",onClick:()=>A("eligibility",l),className:"p-2 rounded-lg transition-colors",style:{color:"#a83232"},children:e.jsx(r,{className:"w-5 h-5"})})]},l))]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Payment Details (Optional)"}),e.jsx("p",{className:"text-sm",style:{color:"#5C4033"},children:"Configure event-specific payment QR code and details. If not provided, default payment details will be used."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Payment QR Code"}),e.jsxs("div",{className:"space-y-3",children:[N?e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:N,alt:"QR Preview",className:"w-full h-64 object-contain bg-white rounded-lg p-4"}),e.jsx("button",{type:"button",onClick:()=>{C(null),E(e=>({...e,paymentQRCode:""})),x.current&&(x.current.value="")},className:"absolute top-2 right-2 p-2 rounded-lg transition-colors",style:{backgroundColor:"#a83232",color:"#FEF3E2"},children:e.jsx(r,{className:"w-4 h-4"})})]}):e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},disabled:y,className:"w-full h-64 border-2 border-dashed rounded-lg flex flex-col items-center justify-center transition-colors disabled:opacity-50",style:{borderColor:"rgba(250, 129, 47, 0.5)",backgroundColor:"rgba(255, 255, 255, 0.5)"},children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 mb-3",style:{borderColor:"#FA812F"}}),e.jsx("p",{style:{color:"#5C4033"},children:"Uploading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"w-12 h-12 mb-3",style:{color:"#FA812F"}}),e.jsx("p",{className:"font-medium",style:{color:"#5C4033"},children:"Click to upload QR code"}),e.jsx("p",{className:"text-sm mt-1",style:{color:"rgba(92, 64, 51, 0.7)"},children:"PNG, JPG up to 10MB"})]})}),e.jsx("input",{ref:x,type:"file",accept:"image/*",onChange:async e=>{var s,l,a;const t=null==(s=e.target.files)?void 0:s[0];if(!t)return;if(!t.type.startsWith("image/"))return void d.error("Please select an image file");if(t.size>10485760)return void d.error("Image size should be less than 10MB");const n=new FileReader;n.onloadend=()=>{C(n.result)},n.readAsDataURL(t),j(!0);const r=new FormData;r.append("image",t);try{const{data:e}=await i.post("/events/upload-image",r,{headers:{"Content-Type":"multipart/form-data"}});E(s=>({...s,paymentQRCode:e.imageUrl})),d.success("QR code uploaded successfully!")}catch(o){d.error((null==(a=null==(l=o.response)?void 0:l.data)?void 0:a.message)||"Failed to upload QR code"),C(null)}finally{j(!1)}},className:"hidden"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"UPI ID"}),e.jsx("input",{type:"text",name:"paymentUPI",value:w.paymentUPI,onChange:z,className:"input-field",placeholder:"example@upi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Account Name"}),e.jsx("input",{type:"text",name:"paymentAccountName",value:w.paymentAccountName,onChange:z,className:"input-field",placeholder:"Account holder name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",style:{color:"#5C4033"},children:"Payment Instructions"}),e.jsx("textarea",{name:"paymentInstructions",value:w.paymentInstructions,onChange:z,className:"input-field min-h-[100px]",placeholder:"Special instructions for this event's payment"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold",style:{color:"#1a365d",fontFamily:"Georgia, serif"},children:"Event Coordinators"}),e.jsxs("button",{type:"button",onClick:()=>{E(e=>({...e,coordinators:[...e.coordinators,{name:"",phone:"",email:""}]}))},className:"btn-secondary text-sm py-2 px-4 flex items-center space-x-2",children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Add Coordinator"})]})]}),w.coordinators.map((s,l)=>e.jsxs("div",{className:"glass-effect p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-semibold",style:{color:"#5C4033"},children:["Coordinator ",l+1]}),w.coordinators.length>1&&e.jsx("button",{type:"button",onClick:()=>(e=>{E(s=>({...s,coordinators:s.coordinators.filter((s,l)=>l!==e)}))})(l),className:"p-1 rounded transition-colors",style:{color:"#a83232"},children:e.jsx(r,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("input",{type:"text",value:s.name,onChange:e=>I(l,"name",e.target.value),className:"input-field",placeholder:"Name"}),e.jsx("input",{type:"tel",value:s.phone,onChange:e=>I(l,"phone",e.target.value),className:"input-field",placeholder:"Phone"}),e.jsx("input",{type:"email",value:s.email,onChange:e=>I(l,"email",e.target.value),className:"input-field",placeholder:"Email"})]})]},l))]}),e.jsxs("div",{className:"flex gap-4 pt-6",children:[e.jsx("button",{type:"button",onClick:()=>m("/admin/events"),className:"flex-1 btn-secondary",disabled:p,children:"Cancel"}),e.jsx("button",{type:"submit",disabled:p,className:"flex-1 btn-primary flex items-center justify-center space-x-2",children:p?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2",style:{borderColor:"#FEF3E2"}}),e.jsx("span",{children:"Creating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{children:"Create Event"})]})})]})]})]})]})})};export{m as default};
