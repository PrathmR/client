import{j as e,m as s}from"./framer-motion-BBUa6XRi.js";import{d as a,u as t,r,L as n}from"./react-vendor-JRUwHvIr.js";import{a as o,A as i}from"./index-m6j2drX8.js";import{a as l,r as c,E as d,s as m,C as w}from"./ui-vendor-B2uU1U_S.js";const x=()=>{const{token:x}=a(),h=t(),[u,p]=r.useState({newPassword:"",confirmPassword:""}),[f,j]=r.useState(!1),[b,y]=r.useState(!1),{showNotification:N}=o(),[g,v]=r.useState(!1),[P,k]=r.useState(!1),S=e=>{p(s=>({...s,[e.target.name]:e.target.value}))};return g?e.jsx("div",{className:"min-h-screen flex items-center justify-center px-4 py-20",children:e.jsxs(s.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card max-w-md w-full text-center",children:[e.jsx(l,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-4 text-white",children:"Password Reset Successful!"}),e.jsx("p",{className:"text-gray-300 mb-6",children:"Your password has been reset successfully. You can now login with your new password."}),e.jsx(n,{to:"/login",className:"btn-primary inline-block",children:"Go to Login"})]})}):e.jsxs("div",{className:"min-h-screen flex items-center justify-center px-4 py-20",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-pink-300/30 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-purple-300/30 rounded-full blur-3xl animate-float",style:{animationDelay:"2s"}})]}),e.jsx(s.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"relative z-10 w-full max-w-md",children:e.jsxs("div",{className:"card",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(s.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2},className:"inline-block mb-4",children:e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-600 to-violet-600 rounded-full flex items-center justify-center mx-auto",children:e.jsx(c,{className:"w-8 h-8 text-white"})})}),e.jsx("h2",{className:"text-3xl font-bold mb-2 text-white",children:"Reset Password"}),e.jsx("p",{className:"text-gray-300",children:"Enter your new password"})]}),e.jsxs("form",{onSubmit:async e=>{var s,a,t;if(e.preventDefault(),(t=u.newPassword).length<8?(N({title:"Weak Password",message:"Password must be at least 8 characters",icon:w,type:"error"}),0):/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&.#^()_+\-=\[\]{};':"\\|,.<>\/?])/.test(t)||(N({title:"Weak Password",message:"Password must contain uppercase, lowercase, number and special character",icon:w,type:"error"}),0))if(u.newPassword===u.confirmPassword){k(!0);try{await i.post(`/auth/reset-password/${x}`,{newPassword:u.newPassword}),v(!0),N({title:"Password Reset Successful!",message:"Your password has been reset successfully. You can now login with your new password. ðŸŽ‰",icon:l}),setTimeout(()=>{h("/login")},2500)}catch(r){N({title:"Reset Failed",message:(null==(a=null==(s=r.response)?void 0:s.data)?void 0:a.message)||"Failed to reset password",icon:w,type:"error"})}finally{k(!1)}}else N({title:"Password Mismatch",message:"Passwords do not match",icon:w,type:"error"})},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsx("input",{type:f?"text":"password",name:"newPassword",value:u.newPassword,onChange:S,className:"input-field pr-12",placeholder:"Enter new password",minLength:"8",title:"Password must be at least 8 characters with uppercase, lowercase, number and special character",required:!0}),e.jsx("button",{type:"button",onClick:()=>j(!f),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:f?e.jsx(d,{className:"w-5 h-5"}):e.jsx(m,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Minimum 8 characters with uppercase, lowercase, number and special character"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2 text-white",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(c,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 pointer-events-none"}),e.jsx("input",{type:b?"text":"password",name:"confirmPassword",value:u.confirmPassword,onChange:S,className:"input-field pr-12",placeholder:"Confirm new password",minLength:"8",title:"Must match new password",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!b),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white transition-colors",children:b?e.jsx(d,{className:"w-5 h-5"}):e.jsx(m,{className:"w-5 h-5"})})]}),u.confirmPassword&&u.newPassword!==u.confirmPassword&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"Passwords do not match"})]}),u.newPassword&&u.confirmPassword&&u.newPassword!==u.confirmPassword&&e.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Passwords do not match"})]}),e.jsx("button",{type:"submit",disabled:P||u.newPassword!==u.confirmPassword,className:"w-full btn-primary flex items-center justify-center space-x-2",children:P?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}),e.jsx("span",{children:"Resetting..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{className:"w-5 h-5"}),e.jsx("span",{children:"Reset Password"})]})})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsx(n,{to:"/login",className:"text-sm text-purple-400 font-semibold hover:text-purple-300 hover:underline transition-colors",children:"Back to Login"})})]})})]})};export{x as default};
